"use strict";(self.webpackChunkmy_web=self.webpackChunkmy_web||[]).push([[365],{7630:(e,t,r)=>{r.d(t,{Z:()=>f});var n=r(2791),s=r(4787),i=r(148),o=r(9726),l=r(3265),a=r(4713),c=r(4131),h=r(4135),d=r(3672),u=(r(9043),r(184));const f=e=>{let{filename:t}=e;const[r,f]=(0,n.useState)(""),g=(0,i.TH)(),p=void 0===t?"disclaimer":t,m=(0,n.useCallback)((e=>{fetch(`/notes/${e}.md`).then((e=>e.text())).then((e=>{f(e)})).catch((t=>{console.error(t),"disclaimer"!==e?(console.log("Retrying with disclaimer.md"),m("disclaimer")):console.log(`Failed to fetch file: /notes/${e}.md`)}))}),[]);(0,n.useEffect)((()=>{m(p)}),[p,m]);return(0,u.jsx)("div",{className:"markdown-container",children:(0,u.jsx)("div",{id:"write",children:(0,u.jsx)(s.U,{className:"markdown-body",remarkPlugins:[o.Z,c.Z],rehypePlugins:[l.Z,a.Z],components:{pre(e){var t;let{node:r,className:n,children:s,...i}=e;const o=r.children[0],l=/language-(\w+)/.exec((null===o||void 0===o||null===(t=o.properties)||void 0===t?void 0:t.className)||"");return l?(0,u.jsx)(h.Z,{style:d.Z,language:l[1],PreTag:"pre",...i,children:String(o.children[0].value).replace(/\n$/,"")}):(0,u.jsx)("pre",{className:"md-fences",...i,children:s})},a(e){let{node:t,...r}=e;if(r.href&&(r.href.startsWith("#user-content-fn-")||r.href.startsWith("#user-content-fnref-"))){const e=`${window.location.origin}${g.pathname}${g.hash}`;return(0,u.jsx)("a",{...r,href:`${e}${r.href}`,onClick:e=>{e.preventDefault(),(e=>{const t=document.getElementById(e);t&&t.scrollIntoView({behavior:"smooth"})})(r.href.substring(1))},children:0===r.children.length?"Link":r.children})}return(0,u.jsx)("a",{...r,children:0===r.children.length?"Link":r.children})}},children:r})})})}},6365:(e,t,r)=>{r.r(t),r.d(t,{default:()=>u});var n=r(2791),s=r(9705);const i="Gavin-OP",o="Gavin-OP.github.io",l="master",a="public/notes/";class c{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:a,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_GITHUB_TOKEN;this.owner=e,this.repo=t,this.branch=r,this.base_path=n,this.octokit=new s.v({auth:c})}transformGitHubTree(e){const t={name:"notes",path:this.base_path,items:[],isFolder:!0},r={"":t};return e.forEach((e=>{if(!e.path.startsWith(this.base_path))return;const t=e.path.replace(this.base_path,"").split("/");let n="";t.forEach(((s,i)=>{const o=i===t.length-1,l=n;if(n=n?`${n}/${s}`:s,!r[n]){const t={name:s,path:`${this.base_path}${n}`,isFolder:!o||"tree"===e.type,items:[]};r[n]=t,r[l].items.push(t)}}))})),t}async getAllNotes(){try{const e=await this.octokit.request("GET /repos/{owner}/{repo}/git/trees/{branch}?recursive=1",{owner:this.owner,repo:this.repo,branch:this.branch,recursive:!0});return this.transformGitHubTree(e.data.tree)}catch(e){return console.error("Error fetching notes:",e),[]}}async getFileContent(e){try{const t=await fetch(`${e}`);if(!t.ok)throw new Error(`Error fetching file: ${t.statusText}`);return await t.text()}catch(t){return console.error("Error fetching file from public folder:",t),null}}}var h=r(7630),d=r(184);const u=()=>{const[e,t]=n.useState({treeData:null,fileContent:null,error:null});return n.useEffect((()=>{(async()=>{const e=new c(i,o,l,a,{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_GITHUB_TOKEN);try{const r=await e.getAllNotes();console.log("Test File Tree:",r);const n="/notes/disclaimer.md",s=await e.getFileContent(n);console.log("File Content Result:",s),t({treeData:r,fileContent:s,error:null})}catch(r){console.error("GitHub Service Test Error:",r),t((e=>({...e,error:r.message})))}})()}),[]),(0,d.jsx)("div",{style:{padding:"20px",backgroundColor:"#f5f5f5"},children:(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{style:{textAlign:"center"},children:"Test Page"}),(0,d.jsx)("h4",{children:"File Tree Sample:"}),(0,d.jsx)("div",{style:{maxHeight:"300px",overflow:"auto"},children:(0,d.jsx)("pre",{children:e.treeData?JSON.stringify(e.treeData.items.slice(0,3),null,2):"Loading..."})}),(0,d.jsx)("h4",{children:"File Content:"}),(0,d.jsx)(h.Z,{})]})})}}}]);
//# sourceMappingURL=365.e6d5f429.chunk.js.map